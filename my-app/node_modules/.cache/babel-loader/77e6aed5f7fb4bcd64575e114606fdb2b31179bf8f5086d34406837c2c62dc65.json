{"ast":null,"code":"var _jsxFileName = \"G:\\\\Coding\\\\KATOMARAN-HACKATHON\\\\my-app\\\\src\\\\components\\\\assets\\\\livestream\\\\livestream.jsx\",\n  _s = $RefreshSig$();\nimport React, { useRef, useEffect } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction LiveStream() {\n  _s();\n  const videoRef = useRef(null);\n  const canvasRef = useRef(null);\n  const width = 640;\n  const height = 480;\n  useEffect(() => {\n    let interval;\n    let faceCache = {};\n    const startCamera = async () => {\n      const stream = await navigator.mediaDevices.getUserMedia({\n        video: true\n      });\n      videoRef.current.srcObject = stream;\n      videoRef.current.play();\n      interval = setInterval(async () => {\n        const video = videoRef.current;\n        const canvas = canvasRef.current;\n        const ctx = canvas.getContext(\"2d\");\n        ctx.drawImage(video, 0, 0, width, height);\n        const dataUrl = canvas.toDataURL(\"image/jpeg\");\n        try {\n          const response = await fetch(\"http://localhost:5000/recognize\", {\n            method: \"POST\",\n            headers: {\n              \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify({\n              image: dataUrl\n            })\n          });\n          const result = await response.json();\n          ctx.clearRect(0, 0, width, height);\n          ctx.drawImage(video, 0, 0, width, height);\n          result.faces.forEach(({\n            name,\n            top,\n            right,\n            bottom,\n            left\n          }) => {\n            const id = `${left}-${top}-${right}-${bottom}`;\n            faceCache[id] = {\n              name,\n              box: {\n                top,\n                right,\n                bottom,\n                left\n              },\n              timestamp: Date.now()\n            };\n          });\n          const now = Date.now();\n          Object.keys(faceCache).forEach(key => {\n            if (now - faceCache[key].timestamp > 2000) {\n              delete faceCache[key];\n            }\n          });\n          Object.values(faceCache).forEach(({\n            name,\n            box\n          }) => {\n            ctx.strokeStyle = \"#00FF00\";\n            ctx.lineWidth = 2;\n            ctx.strokeRect(box.left, box.top, box.right - box.left, box.bottom - box.top);\n            ctx.fillStyle = \"#00FF00\";\n            ctx.font = \"16px Arial\";\n            ctx.fillText(name, box.left + 5, box.top - 8);\n          });\n        } catch (error) {\n          console.error(\"Recognition error:\", error);\n        }\n      }, 700);\n    };\n    startCamera();\n    return () => {\n      var _videoRef$current;\n      clearInterval(interval);\n      if ((_videoRef$current = videoRef.current) !== null && _videoRef$current !== void 0 && _videoRef$current.srcObject) {\n        videoRef.current.srcObject.getTracks().forEach(track => track.stop());\n      }\n    };\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      position: \"relative\",\n      width,\n      height\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"video\", {\n      ref: videoRef,\n      width: width,\n      height: height,\n      style: {\n        position: \"absolute\",\n        zIndex: 1\n      },\n      autoPlay: true,\n      muted: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"canvas\", {\n      ref: canvasRef,\n      width: width,\n      height: height,\n      style: {\n        position: \"absolute\",\n        zIndex: 2\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 79,\n    columnNumber: 5\n  }, this);\n}\n_s(LiveStream, \"0gwqVvoOV2or9Ql4L8GH2BGn3hc=\");\n_c = LiveStream;\nexport default LiveStream;\nvar _c;\n$RefreshReg$(_c, \"LiveStream\");","map":{"version":3,"names":["React","useRef","useEffect","jsxDEV","_jsxDEV","LiveStream","_s","videoRef","canvasRef","width","height","interval","faceCache","startCamera","stream","navigator","mediaDevices","getUserMedia","video","current","srcObject","play","setInterval","canvas","ctx","getContext","drawImage","dataUrl","toDataURL","response","fetch","method","headers","body","JSON","stringify","image","result","json","clearRect","faces","forEach","name","top","right","bottom","left","id","box","timestamp","Date","now","Object","keys","key","values","strokeStyle","lineWidth","strokeRect","fillStyle","font","fillText","error","console","_videoRef$current","clearInterval","getTracks","track","stop","style","position","children","ref","zIndex","autoPlay","muted","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["G:/Coding/KATOMARAN-HACKATHON/my-app/src/components/assets/livestream/livestream.jsx"],"sourcesContent":["import React, { useRef, useEffect } from \"react\";\r\n\r\nfunction LiveStream() {\r\n  const videoRef = useRef(null);\r\n  const canvasRef = useRef(null);\r\n  const width = 640;\r\n  const height = 480;\r\n\r\n  useEffect(() => {\r\n    let interval;\r\n    let faceCache = {};\r\n\r\n    const startCamera = async () => {\r\n      const stream = await navigator.mediaDevices.getUserMedia({ video: true });\r\n      videoRef.current.srcObject = stream;\r\n      videoRef.current.play();\r\n\r\n      interval = setInterval(async () => {\r\n        const video = videoRef.current;\r\n        const canvas = canvasRef.current;\r\n        const ctx = canvas.getContext(\"2d\");\r\n\r\n        ctx.drawImage(video, 0, 0, width, height);\r\n        const dataUrl = canvas.toDataURL(\"image/jpeg\");\r\n\r\n        try {\r\n          const response = await fetch(\"http://localhost:5000/recognize\", {\r\n            method: \"POST\",\r\n            headers: { \"Content-Type\": \"application/json\" },\r\n            body: JSON.stringify({ image: dataUrl }),\r\n          });\r\n\r\n          const result = await response.json();\r\n          ctx.clearRect(0, 0, width, height);\r\n          ctx.drawImage(video, 0, 0, width, height);\r\n\r\n          result.faces.forEach(({ name, top, right, bottom, left }) => {\r\n            const id = `${left}-${top}-${right}-${bottom}`;\r\n            faceCache[id] = {\r\n              name,\r\n              box: { top, right, bottom, left },\r\n              timestamp: Date.now(),\r\n            };\r\n          });\r\n\r\n          const now = Date.now();\r\n          Object.keys(faceCache).forEach((key) => {\r\n            if (now - faceCache[key].timestamp > 2000) {\r\n              delete faceCache[key];\r\n            }\r\n          });\r\n\r\n          Object.values(faceCache).forEach(({ name, box }) => {\r\n            ctx.strokeStyle = \"#00FF00\";\r\n            ctx.lineWidth = 2;\r\n            ctx.strokeRect(box.left, box.top, box.right - box.left, box.bottom - box.top);\r\n            ctx.fillStyle = \"#00FF00\";\r\n            ctx.font = \"16px Arial\";\r\n            ctx.fillText(name, box.left + 5, box.top - 8);\r\n          });\r\n\r\n        } catch (error) {\r\n          console.error(\"Recognition error:\", error);\r\n        }\r\n      }, 700);\r\n    };\r\n\r\n    startCamera();\r\n\r\n    return () => {\r\n      clearInterval(interval);\r\n      if (videoRef.current?.srcObject) {\r\n        videoRef.current.srcObject.getTracks().forEach((track) => track.stop());\r\n      }\r\n    };\r\n  }, []);\r\n\r\n  return (\r\n    <div style={{ position: \"relative\", width, height }}>\r\n      <video ref={videoRef} width={width} height={height} style={{ position: \"absolute\", zIndex: 1 }} autoPlay muted />\r\n      <canvas ref={canvasRef} width={width} height={height} style={{ position: \"absolute\", zIndex: 2 }} />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default LiveStream;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}