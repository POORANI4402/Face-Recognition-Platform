{"ast":null,"code":"var _jsxFileName = \"G:\\\\Coding\\\\KATOMARAN-HACKATHON\\\\my-app\\\\src\\\\components\\\\assets\\\\livestream\\\\livestream.jsx\",\n  _s = $RefreshSig$();\n// import React, { useEffect, useRef, useState } from \"react\";\n\n// const LiveStream = () => {\n//   const videoRef = useRef(null);\n//   const canvasRef = useRef(null);\n//   const [streaming, setStreaming] = useState(false);\n\n//   useEffect(() => {\n//     startCamera();\n//     const interval = setInterval(() => {\n//       if (streaming) {\n//         captureAndSendFrame();\n//       }\n//     }, 1000); // Send frame every 1s\n\n//     return () => {\n//       stopCamera();\n//       clearInterval(interval);\n//     };\n//   }, [streaming]);\n\n//   const startCamera = async () => {\n//     try {\n//       const stream = await navigator.mediaDevices.getUserMedia({ video: true });\n//       videoRef.current.srcObject = stream;\n//       setStreaming(true);\n//     } catch (err) {\n//       console.error(\"Camera error:\", err);\n//     }\n//   };\n\n//   const stopCamera = () => {\n//     if (videoRef.current && videoRef.current.srcObject) {\n//       const tracks = videoRef.current.srcObject.getTracks();\n//       tracks.forEach(track => track.stop());\n//     }\n//     setStreaming(false);\n//   };\n\n//   const captureAndSendFrame = async () => {\n//     const video = videoRef.current;\n//     const canvas = canvasRef.current;\n//     if (!video || !canvas) return;\n\n//     const context = canvas.getContext(\"2d\");\n//     context.drawImage(video, 0, 0, canvas.width, canvas.height);\n\n//     const dataURL = canvas.toDataURL(\"image/jpeg\");\n\n//     try {\n//       const res = await fetch(\"http://localhost:5000/recognize\", {\n//         method: \"POST\",\n//         headers: { \"Content-Type\": \"application/json\" },\n//         body: JSON.stringify({ image: dataURL }),\n//       });\n\n//       const data = await res.json();\n//       drawBoxes(data.faces);\n//     } catch (err) {\n//       console.error(\"Recognition error:\", err);\n//     }\n//   };\n\n//   const drawBoxes = (faces) => {\n//     const canvas = canvasRef.current;\n//     const ctx = canvas.getContext(\"2d\");\n\n//     ctx.clearRect(0, 0, canvas.width, canvas.height);\n\n//     for (let face of faces) {\n//       const { left, top, right, bottom, name } = face;\n//       ctx.strokeStyle = \"green\";\n//       ctx.lineWidth = 2;\n//       ctx.strokeRect(left, top, right - left, bottom - top);\n\n//       ctx.fillStyle = \"green\";\n//       ctx.fillRect(left, top - 20, ctx.measureText(name).width + 10, 20);\n\n//       ctx.fillStyle = \"white\";\n//       ctx.font = \"16px Arial\";\n//       ctx.fillText(name, left + 5, top - 5);\n//     }\n//   };\n\n//   return (\n//     <div>\n//       <h2>Live Face Recognition</h2>\n//       <div style={{ position: \"relative\", width: \"640px\", height: \"480px\" }}>\n//         <video\n//           ref={videoRef}\n//           autoPlay\n//           muted\n//           width=\"640\"\n//           height=\"480\"\n//           style={{ position: \"absolute\", zIndex: 1 }}\n//         />\n//         <canvas\n//           ref={canvasRef}\n//           width=\"640\"\n//           height=\"480\"\n//           style={{ position: \"absolute\", zIndex: 2 }}\n//         />\n//       </div>\n//     </div>\n//   );\n// };\n\n// export default LiveStream;\n\nimport React, { useRef, useEffect, useState } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction LiveStream() {\n  _s();\n  const videoRef = useRef(null);\n  const [recognizedFaces, setRecognizedFaces] = useState([]);\n  useEffect(() => {\n    navigator.mediaDevices.getUserMedia({\n      video: true\n    }).then(stream => {\n      videoRef.current.srcObject = stream;\n    });\n    const interval = setInterval(() => {\n      captureFrameAndRecognize();\n    }, 3000); // capture every 3 seconds\n\n    return () => clearInterval(interval);\n  }, []);\n  const captureFrameAndRecognize = () => {\n    const video = videoRef.current;\n    const canvas = document.createElement(\"canvas\");\n    canvas.width = video.videoWidth || 640;\n    canvas.height = video.videoHeight || 480;\n    canvas.getContext(\"2d\").drawImage(video, 0, 0, canvas.width, canvas.height);\n    const dataUrl = canvas.toDataURL(\"image/jpeg\");\n    fetch(\"http://localhost:5000/recognize\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        image: dataUrl\n      })\n    }).then(res => res.json()).then(data => {\n      if (data.faces) {\n        setRecognizedFaces(data.faces);\n      }\n    }).catch(err => console.error(\"Recognition error\", err));\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      textAlign: \"center\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"\\uD83C\\uDFA5 Live Face Recognition with Flask\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"video\", {\n      ref: videoRef,\n      autoPlay: true,\n      muted: true,\n      playsInline: true,\n      width: \"640\",\n      height: \"480\",\n      style: {\n        border: \"1px solid black\"\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginTop: \"20px\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Recognized Faces:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 9\n      }, this), recognizedFaces.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"\\uD83D\\uDD0D Scanning...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 11\n      }, this) : recognizedFaces.map((face, index) => /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"\\uD83E\\uDDE0 \", /*#__PURE__*/_jsxDEV(\"strong\", {\n          children: face.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 18\n        }, this), \" at (\", face.left, \",\", face.top, \")\"]\n      }, index, true, {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 13\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 158,\n    columnNumber: 5\n  }, this);\n}\n_s(LiveStream, \"ktvElhr+zyqaWXpCmiA30yxogJU=\");\n_c = LiveStream;\nexport default LiveStream;\nvar _c;\n$RefreshReg$(_c, \"LiveStream\");","map":{"version":3,"names":["React","useRef","useEffect","useState","jsxDEV","_jsxDEV","LiveStream","_s","videoRef","recognizedFaces","setRecognizedFaces","navigator","mediaDevices","getUserMedia","video","then","stream","current","srcObject","interval","setInterval","captureFrameAndRecognize","clearInterval","canvas","document","createElement","width","videoWidth","height","videoHeight","getContext","drawImage","dataUrl","toDataURL","fetch","method","headers","body","JSON","stringify","image","res","json","data","faces","catch","err","console","error","style","textAlign","children","fileName","_jsxFileName","lineNumber","columnNumber","ref","autoPlay","muted","playsInline","border","marginTop","length","map","face","index","name","left","top","_c","$RefreshReg$"],"sources":["G:/Coding/KATOMARAN-HACKATHON/my-app/src/components/assets/livestream/livestream.jsx"],"sourcesContent":["// import React, { useEffect, useRef, useState } from \"react\";\r\n\r\n// const LiveStream = () => {\r\n//   const videoRef = useRef(null);\r\n//   const canvasRef = useRef(null);\r\n//   const [streaming, setStreaming] = useState(false);\r\n\r\n//   useEffect(() => {\r\n//     startCamera();\r\n//     const interval = setInterval(() => {\r\n//       if (streaming) {\r\n//         captureAndSendFrame();\r\n//       }\r\n//     }, 1000); // Send frame every 1s\r\n\r\n//     return () => {\r\n//       stopCamera();\r\n//       clearInterval(interval);\r\n//     };\r\n//   }, [streaming]);\r\n\r\n//   const startCamera = async () => {\r\n//     try {\r\n//       const stream = await navigator.mediaDevices.getUserMedia({ video: true });\r\n//       videoRef.current.srcObject = stream;\r\n//       setStreaming(true);\r\n//     } catch (err) {\r\n//       console.error(\"Camera error:\", err);\r\n//     }\r\n//   };\r\n\r\n//   const stopCamera = () => {\r\n//     if (videoRef.current && videoRef.current.srcObject) {\r\n//       const tracks = videoRef.current.srcObject.getTracks();\r\n//       tracks.forEach(track => track.stop());\r\n//     }\r\n//     setStreaming(false);\r\n//   };\r\n\r\n//   const captureAndSendFrame = async () => {\r\n//     const video = videoRef.current;\r\n//     const canvas = canvasRef.current;\r\n//     if (!video || !canvas) return;\r\n\r\n//     const context = canvas.getContext(\"2d\");\r\n//     context.drawImage(video, 0, 0, canvas.width, canvas.height);\r\n\r\n//     const dataURL = canvas.toDataURL(\"image/jpeg\");\r\n\r\n//     try {\r\n//       const res = await fetch(\"http://localhost:5000/recognize\", {\r\n//         method: \"POST\",\r\n//         headers: { \"Content-Type\": \"application/json\" },\r\n//         body: JSON.stringify({ image: dataURL }),\r\n//       });\r\n\r\n//       const data = await res.json();\r\n//       drawBoxes(data.faces);\r\n//     } catch (err) {\r\n//       console.error(\"Recognition error:\", err);\r\n//     }\r\n//   };\r\n\r\n//   const drawBoxes = (faces) => {\r\n//     const canvas = canvasRef.current;\r\n//     const ctx = canvas.getContext(\"2d\");\r\n\r\n//     ctx.clearRect(0, 0, canvas.width, canvas.height);\r\n\r\n//     for (let face of faces) {\r\n//       const { left, top, right, bottom, name } = face;\r\n//       ctx.strokeStyle = \"green\";\r\n//       ctx.lineWidth = 2;\r\n//       ctx.strokeRect(left, top, right - left, bottom - top);\r\n\r\n//       ctx.fillStyle = \"green\";\r\n//       ctx.fillRect(left, top - 20, ctx.measureText(name).width + 10, 20);\r\n\r\n//       ctx.fillStyle = \"white\";\r\n//       ctx.font = \"16px Arial\";\r\n//       ctx.fillText(name, left + 5, top - 5);\r\n//     }\r\n//   };\r\n\r\n//   return (\r\n//     <div>\r\n//       <h2>Live Face Recognition</h2>\r\n//       <div style={{ position: \"relative\", width: \"640px\", height: \"480px\" }}>\r\n//         <video\r\n//           ref={videoRef}\r\n//           autoPlay\r\n//           muted\r\n//           width=\"640\"\r\n//           height=\"480\"\r\n//           style={{ position: \"absolute\", zIndex: 1 }}\r\n//         />\r\n//         <canvas\r\n//           ref={canvasRef}\r\n//           width=\"640\"\r\n//           height=\"480\"\r\n//           style={{ position: \"absolute\", zIndex: 2 }}\r\n//         />\r\n//       </div>\r\n//     </div>\r\n//   );\r\n// };\r\n\r\n// export default LiveStream;\r\n\r\n\r\n\r\n\r\n\r\nimport React, { useRef, useEffect, useState } from \"react\";\r\n\r\nfunction LiveStream() {\r\n  const videoRef = useRef(null);\r\n  const [recognizedFaces, setRecognizedFaces] = useState([]);\r\n\r\n  useEffect(() => {\r\n    navigator.mediaDevices.getUserMedia({ video: true }).then((stream) => {\r\n      videoRef.current.srcObject = stream;\r\n    });\r\n\r\n    const interval = setInterval(() => {\r\n      captureFrameAndRecognize();\r\n    }, 3000); // capture every 3 seconds\r\n\r\n    return () => clearInterval(interval);\r\n  }, []);\r\n\r\n  const captureFrameAndRecognize = () => {\r\n    const video = videoRef.current;\r\n    const canvas = document.createElement(\"canvas\");\r\n    canvas.width = video.videoWidth || 640;\r\n    canvas.height = video.videoHeight || 480;\r\n    canvas.getContext(\"2d\").drawImage(video, 0, 0, canvas.width, canvas.height);\r\n\r\n    const dataUrl = canvas.toDataURL(\"image/jpeg\");\r\n\r\n    fetch(\"http://localhost:5000/recognize\", {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\"\r\n      },\r\n      body: JSON.stringify({ image: dataUrl })\r\n    })\r\n      .then((res) => res.json())\r\n      .then((data) => {\r\n        if (data.faces) {\r\n          setRecognizedFaces(data.faces);\r\n        }\r\n      })\r\n      .catch((err) => console.error(\"Recognition error\", err));\r\n  };\r\n\r\n  return (\r\n    <div style={{ textAlign: \"center\" }}>\r\n      <h2>üé• Live Face Recognition with Flask</h2>\r\n      <video ref={videoRef} autoPlay muted playsInline width=\"640\" height=\"480\" style={{ border: \"1px solid black\" }} />\r\n      <div style={{ marginTop: \"20px\" }}>\r\n        <h3>Recognized Faces:</h3>\r\n        {recognizedFaces.length === 0 ? (\r\n          <p>üîç Scanning...</p>\r\n        ) : (\r\n          recognizedFaces.map((face, index) => (\r\n            <p key={index}>\r\n              üß† <strong>{face.name}</strong> at ({face.left},{face.top})\r\n            </p>\r\n          ))\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default  LiveStream;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}